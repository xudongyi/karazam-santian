$(function () {    $('#headImg').on('click', function () {        $('#modifyAvatarModal').modal({            backdrop : 'static'        });    })});//定义一个全局api，这样操作起来比较灵活var api = null,    boundx,    boundy,    $preview = $('#preview-pane'),    $pcnt = $('#preview-pane .preview-container'),    $pimg = $('#preview-pane .preview-container img'),    xsize = $pcnt.width(),    ysize = $pcnt.height();function readURL(input) {    if (input.files && input.files[0]) {        var reader = new FileReader();        reader.readAsDataURL(input.files[0]);        reader.onload = function(e) {            $('#cutimg').removeAttr('src');            $('#cutimg').attr('src', e.target.result);            $pimg.removeAttr('src');            $pimg.attr('src', e.target.result);            api = $.Jcrop('#cutimg', {                setSelect: [ 20, 20, 200, 200 ],                aspectRatio: 1,                onSelect: updateCoords,                onChange:updateCoords            });            var bounds = api.getBounds();            boundx = bounds[0];            boundy = bounds[1];            $preview.appendTo(api.ui.holder);        };        if (api != undefined) {            api.destroy();        }    }    function updateCoords(obj) {        $("#x").val(obj.x);        $("#y").val(obj.y);        $("#w").val(obj.w);        $("#h").val(obj.h);        if (parseInt(obj.w) > 0) {            var rx = xsize / obj.w;            var ry = ysize / obj.h;            $pimg.css({                width : Math.round(rx * boundx) + 'px',                height : Math.round(ry * boundy) + 'px',                marginLeft : '-' + Math.round(rx * obj.x) + 'px',                marginTop : '-' + Math.round(ry * obj.y) + 'px'            });        }    }    ;}