$(function () {    var $autoInvestmentSignForm = $("#autoInvestmentSignForm"), $submit = $autoInvestmentSignForm.find(":submit");    $('#toSettingSign').on('click', function () {        var valid = $('#autoForm').valid();        if (!valid) {            return;        }        var signType = $('#signType').val();        var projectMinCyc = $('#projectMinCyc').val();        var projectMaxCyc = $('#projectMaxCyc').val();        var investMinAmount = $('#investMinAmount').val();        var investMaxAmount = $('#investMaxAmount').val();        var interestRateMinRate = $('#interestRateMinRate').val();        var interestRateMaxRate = $('#interestRateMaxRate').val();        var validity = $('#validity').val();        if (new Number(projectMaxCyc) < new Number(projectMinCyc)) {            layer.msg("投标期限最大值不能小于投标期限最小值1");            return;        }        if (new Number(investMinAmount) < 100) {            layer.msg("投标区间最小值不能小于100");            return;        }        if (new Number(investMaxAmount) < new Number(investMinAmount)) {            layer.msg("投标区间最大值不能小于投标区间最小值");            return;        }        if (new Number(interestRateMaxRate) < new Number(interestRateMinRate)) {            layer.msg("利率区间最大值不能小于利率区间最小值");            return;        }        $('#projectMinCycShow').text(projectMinCyc + '天');        $('#projectMaxCycShow').text(projectMaxCyc + '天');        $('#investMinAmountShow').text(investMinAmount + '元');        $('#investMaxAmountShow').text(investMaxAmount + '元');        $('#interestRateMinRateShow').text(interestRateMinRate + '%');        $('#interestRateMaxRateShow').text(interestRateMaxRate + '%');        $('#validityShow').text(validity + '天');        $('#autoInvestmentSignModal').modal({            backdrop : 'static'        });        $submit.prop("disabled", false);        $autoInvestmentSignForm.validate({            errorClass: "errorMessage",            rules: {                agreement: "required"            },            messages: {                agreement: "请先阅读并同意《自动投标授权协议》"            },            errorPlacement: function(error, element) {                layer.msg(error.text());            },            unhighlight: function(element) {            },            submitHandler: function(form) {                $submit.prop("disabled", true);                signType = $('#signType').val();                projectMinCyc = $('#projectMinCyc').val();                projectMaxCyc = $('#projectMaxCyc').val();                investMinAmount = $('#investMinAmount').val();                investMaxAmount = $('#investMaxAmount').val();                interestRateMinRate = $('#interestRateMinRate').val();                interestRateMaxRate = $('#interestRateMaxRate').val();                validity = $('#validity').val();                $.ajax({                    url: ctx + "/uc/autoInvestment/auto_sign",                    data: {                        projectMinCyc: projectMinCyc,                        projectMaxCyc:projectMaxCyc,                        investMinAmount : investMinAmount,                        investMaxAmount : investMaxAmount,                        interestRateMinRate : interestRateMinRate,                        interestRateMaxRate : interestRateMaxRate,                        validity : validity                    },                    type: "post",                    dataType: "json",                    cache: false,                    beforeSend: function(request, settings) {                        request.setRequestHeader("token", $.cookie("token"));                        $submit.text(" 提 交 中 ... ");                    },                    success: function (result) {                        if (result.status == "success") {                            // createFormSubmit(result.data.requestUrl, result.data.parameterMap);                            window.location.href = ctx + '/uc/autoInvestment';                        } else {                            $('#autoInvestmentSignModal').find('#signCloseBtn').click();                            layer.msg(result.message);                            $submit.text(" 确 定 ");                            $submit.prop("disabled", false);                        }                    },                    error: function() {                        $submit.text(" 请刷新页面重试 ");                    }                });            }        });    });    $('#autoForm').validate({        rules: {            validity: "required",            projectMinCyc: {                required: true,                digits: true,                min: 1            },            projectMaxCyc: {                required: true,                digits: true            },            investMinAmount: {                required: true,                digits: true,                min: 1            },            investMaxAmount: {                required: true,                digits: true            },            interestRateMinRate: {                required: true,                digits: true,                min: 1            },            interestRateMaxRate: {                required: true,                digits: true,                max:48            }        },        messages: {            validity: "有效期必输",            projectMinCyc: {                required: "投标期限最小值必输",                digits: "请输入正确投标期限",                min: "投标期限最小值为1"            },            projectMaxCyc: {                required: "投标期限最大值必输",                digits: "请输入正确投标期限"            },            investMinAmount: {                required: "投标区间最小值必输",                digits: "请输入正确投标区间",                min: "投标区间最小值为1"            },            investMaxAmount: {                required: "投标区间最大值必输",                digits: "请输入正确投标区间"            },            interestRateMinRate: {                required: "利率区间最小值必输",                digits: "请输入正确利率区间",                min: "利率区间最小值为1"            },            interestRateMaxRate: {                required: "利率区间最大值必输",                digits: "请输入正确利率区间",                max: "利率最大为48"            }        },        errorPlacement: function(error, element) {            layer.msg(error.text());        }    });    // 鼠标移入问号显示说明    $('.helpTipsIcon').hover(function () {        $('.helpTipsI').show();        $('.helpTipsText').show();    }, function () {        $('.helpTipsI').hide();        $('.helpTipsText').hide();    });    $.getJSON(ctx + '/uc/autoInvestment/rankInfos', {}, function (result) {        $('#effectiveSign1').text(result.data.effectiveSign);        $('#effectiveSign2').text(result.data.effectiveSign);        if (result.data.userRank==null) {            $('#userRank').text('暂无排名');        } else {            $('#userRank').text(result.data.userRank);        }    });});