!function t(e,n,a){function r(o,u){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[o]={"exports":{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return r(n?n:t)},l,l.exports,t,e,n,a)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({"1":[function(t,e,n){!function(t){var e={"init":function(){return function(){e.fillHtml(),e.bindEvent()}()},"fillHtml":function(){return function(){e.element.empty(),e.args.current>1?e.element.append('<div class="btn-page pre"><</div>'):(e.element.remove(".pre"),e.element.append('<div class="btn-page disabled"><</div>')),1!=e.args.current&&e.args.current>=4&&4!=e.args.pageCount&&e.element.append('<div class="btn-page tcdNumber">1</div>'),e.args.current-2>2&&e.args.current<=e.args.pageCount&&e.args.pageCount>5&&e.element.append('<div class="btn-page more">...</div>');var t=e.args.current-2,n=e.args.current+2;for((t>1&&e.args.current<4||1==e.args.current)&&n++,e.args.current>e.args.pageCount-4&&e.args.current>=e.args.pageCount&&t--;t<=n;t++)t<=e.args.pageCount&&t>=1&&(t!=e.args.current?e.element.append('<div class="btn-page tcdNumber">'+t+"</div>"):e.element.append('<div class="btn-page current">'+t+"</div>"));e.args.current+2<e.args.pageCount-1&&e.args.current>=1&&e.args.pageCount>5&&e.element.append('<div class="btn-page more">...</div>'),e.args.current!=e.args.pageCount&&e.args.current<e.args.pageCount-2&&4!=e.args.pageCount&&e.element.append('<div class="btn-page tcdNumber">'+e.args.pageCount+"</div>"),e.args.current<e.args.pageCount?e.element.append('<div class="btn-page next">></div>'):(e.element.remove(".next"),e.element.append('<div class="btn-page disabled">></div>'))}()},"bindEvent":function(){return function(){e.element.on("click",".tcdNumber",function(){if("function"==typeof e.args.beforeFn){var n=e.args.beforeFn();if(!n)return}var a=parseInt(t(this).text());e.args.current=a,e.fillHtml(),"function"==typeof e.args.backFn&&e.args.backFn(a)}),e.element.on("click",".pre",function(){if("function"==typeof e.args.beforeFn){var t=e.args.beforeFn();if(!t)return}var n=parseInt(e.element.children(".current").text());e.args.current=n-1,e.fillHtml(),"function"==typeof e.args.backFn&&e.args.backFn(n-1)}),e.element.on("click",".next",function(){if("function"==typeof e.args.beforeFn){var t=e.args.beforeFn();if(!t)return}var n=parseInt(e.element.children(".current").text());e.args.current=n+1,e.fillHtml(),"function"==typeof e.args.backFn&&e.args.backFn(n+1)})}()},"reset":function(n){e.args=t.extend(e.args,n),e.fillHtml()}};t.fn.createPage=function(n){var a=t.extend({"pageCount":10,"current":1,"backFn":function(){},"beforeFn":function(){return!0}},n);return e.element=this,e.args=a,e.init(),e}}(jQuery)},{}],"2":[function(t,e,n){t("../../plugins/jquery.page.js"),function(e){var n=t("../../../snippet/detail_tpl_records.def"),a=!!e("[role=navigation]").attr("un-id"),r=e(".prodIntro").attr("data-product-id"),i=!!e(".prodIntro").attr("data-event-id"),o=function(){if(!e(".records-table").hasClass("loaded")){var t={"page":1,"pageSize":10},a=null,i=function(){var o="/mall/api/v2/product/"+r+"/orders";e.get(o,t,function(r){var o=0;if(r.success){var u=r.data.results;o=r.data.totalSize;for(var c=[],s=0;s<u.length;s++){var l={};l.userName=u[s].userName,l.count=u[s].quantity,l.pointSpend=u[s].pointSpend,l.creatTime=formatDate(new Date(u[s].createDate),"yyyy-MM-dd hh:mm:ss"),c.push(l)}e(".records-table tbody").html(dotRender(n,c)),e(".records-table").addClass("loaded"),Math.ceil(o/t.pageSize)>1?e(".page-bar").show():e(".page-bar").hide(),a?a.reset({"pageCount":Math.ceil(o/t.pageSize),"current":t.page}):a=e(".page-bar").createPage({"pageCount":Math.ceil(o/t.pageSize),"current":t.page,"backFn":function(e){t.page=e,i()}})}})};i()}},u=function(){var t={"PRODUCT_NOT_EXIST":"\u62b1\u6b49\uff0c\u8be5\u5546\u54c1\u5df2\u4e0b\u67b6\uff0c\u8bf7\u60a8\u9009\u62e9\u5176\u4ed6\u5546\u54c1\uff01","PRODUCT_INVENTORY_ZERO":"\u62b1\u6b49\uff0c\u8be5\u5546\u54c1\u5e93\u5b58\u4e0d\u8db3\uff0c\u8bf7\u60a8\u9009\u62e9\u5176\u4ed6\u5546\u54c1\uff01","USER_POINT_GET_FAIL":"\u62b1\u6b49\uff0c\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u60a8\u91cd\u65b0\u4e0b\u5355\uff01","USER_POINT_NOT_ENOUGH":"\u62b1\u6b49\uff0c\u60a8\u7684\u79ef\u5206\u4e0d\u8db3\uff0c\u6682\u65f6\u65e0\u6cd5\u8fdb\u884c\u6362\u8d2d\uff01","LIMIT_PURCHASE_EXCEED":"\u62b1\u6b49\uff0c\u60a8\u6700\u591a\u53ef\u6362\u8d2d"+(e(".limitCount").html()?e(".limitCount").html()+"\u4ef6":e(".limitPurchaseTimes").html()+e(".countUnit").html())+"\u8be5\u5546\u54c1\uff01"};e(".tab-btn").click(function(){e(this).hasClass("active")||(e(this).addClass("active").siblings().removeClass("active"),e(".tab-content").removeClass("active"),e(".tab-content").eq(e(this).index()).addClass("active"),e(this).hasClass("tab-buyRecords")&&o())}),e("button.buy").click(function(){if(!a)return void toLogin();var n=e(this);if(!regExp.isPositiveInt(e("input.bug-count").val()))return void s("\u60a8\u8f93\u5165\u7684\u8d2d\u4e70\u6570\u91cf\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01");var o=parseInt(e("input.bug-count").val()),u=parseInt(e(".leftCount").html()),c=parseInt(e(".limitCount").html());if(i&&o>1)return void s("\u62b1\u6b49\uff0c\u5546\u54c1\u5355\u6b21\u9650\u6362\u8d2d1\u4e2a\uff01");if(o>u)return void s("\u60a8\u8f93\u5165\u7684\u8d2d\u4e70\u6570\u91cf\u5927\u4e8e\u5e93\u5b58\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01");var l=e("[role=navigation]").attr("un-id"),d="/mall/api/v2/order/getOrderDetailInfo?userId="+l+"&productId="+r+"&quantity="+o;e.get(d,function(a){if(!a.success){var r=a.error[0];return void s("LIMIT_PURCHASE_EXCEED"==r.message&&r.value>0?c?"\u62b1\u6b49\uff0c\u60a8\u6700\u591a\u53ef\u6362\u8d2d"+c+"\u4ef6\u8be5\u5546\u54c1\uff0c\u60a8\u5df2\u7ecf\u8d2d\u4e70\u8fc7"+r.value+e(".countUnit").html()+"\uff01":"\u62b1\u6b49\uff0c\u60a8"+e(".limitPurchaseFrequency").html()+e(".limitPurchaseUnit").html()+"\u6700\u591a\u53ef\u6362\u8d2d"+e(".limitPurchaseTimes").html()+"\u4ef6\u8be5\u5546\u54c1\uff0c\u60a8\u5df2\u7ecf\u8d2d\u4e70\u8fc7"+r.value+e(".countUnit").html()+"\uff01":t[r.message])}location.href=n.attr("data-buy-url")+o})}),e("button.follow").click(function(){if(!a)return void toLogin();var t=e(this);t.find(".fa-heart").hasClass("orange")?e.when(e.post("/mall/api/v2/favorite/user/MYSELF/product/"+r+"/cancel")).then(function(e){e.success?(t.find(".fa-heart").removeClass("orange"),t.find(".favoriteText").html("\u52a0\u5173\u6ce8"),l("\u53d6\u6d88\u5173\u6ce8")):l("\u53d6\u6d88\u5173\u6ce8\u5931\u8d25")}):e.when(e.post("/mall/api/v2/favorite/user/MYSELF/product/"+r)).then(function(e){e.success?(t.find(".fa-heart").addClass("orange"),t.find(".favoriteText").html("\u5df2\u5173\u6ce8"),l("\u5173\u6ce8\u6210\u529f")):l("\u5173\u6ce8\u5931\u8d25")})}),e(window).scroll(function(){var t=e("body").scrollTop();t>=e(".tab-container").offset().top?e(".quick-bar").fadeIn():e(".quick-bar").fadeOut()})},c=function(){var t=parseInt(e("input.bug-count").attr("data-max-count")),n=parseInt(e("span.leftCount").html()),a=n;t>0&&(a=_.min([n,t])),e("button.subtract").click(function(){var t=parseInt(e("input.bug-count").val());t<=1||(t-=1,e("input.bug-count").val(t))}),e("button.add").click(function(){var t=parseInt(e("input.bug-count").val());t>=a||(t+=1,e("input.bug-count").val(t))})},s=function(t){_.isString(t)&&(t={"text":t});var n=e.extend({"text":"","btnName":"\u786e\u5b9a","btnFn":function(){e(".dialog").hide(),e(".dialog-bg").hide(),e(".dialog").css("top","0px")}},t);e(".dialog p.text").html(n.text),e(".dialog .button").html(n.btnName),e(".dialog .button").unbind("click").bind("click",function(){n.btnFn()}),e(".dialog .close").unbind("click").bind("click",function(){e(".dialog").hide(),e(".dialog-bg").hide(),e(".dialog").css("top","0px")}),e(".dialog").show(),e(".dialog-bg").show(),e(".dialog").animate({"top":"50%"},{"duration":300})},l=function(t){var n=e(".focus-tip-detail");n.html(t).fadeIn(1500).animate({"opacity":0,"top":-66,"marginLeft":120},function(){n.css({"top":14,"marginLeft":10,"opacity":1,"display":"none"})})};c(),u()}(jQuery)},{"../../../snippet/detail_tpl_records.def":3,"../../plugins/jquery.page.js":1}],"3":[function(t,e,n){e.exports="{%~it:item:index%}\n<tr>\n  <td>{%=item.userName%}</td>\n  <td>{%=item.count%}</td>\n  <td>{%=item.pointSpend%}</td>\n  <td>{%=item.creatTime%}</td>\n</tr>\n{%~%}"},{}]},{},[2]);